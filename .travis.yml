# Config file for automatic testing at travis-ci.org
dist: trusty   # required for Python >= 3.7
language: Python

python:
  - "3.5"
  - "3.6"
# - "3.7"

sudo: required

# https://docs.travis-ci.com/user/database-setup/#cassandra
services:
  - cassandra

before_script:
  - pip install pytz
  - bash travis/setup_cassandra.sh

install:
  - pip install tornado==5.1.0
  - pip install -r requirements.txt
  - pip install 'requests<2.20' codacy-coverage 'pytest>=3.6.0'

# command to run tests
script: python setup.py test

# upload coverage information to Codacy
after_success:
  - export CODACY_PROJECT_TOKEN=92a10722c0bd471ab1a8a46621d24bf1
  - python-codacy-coverage -r coverage.xml
